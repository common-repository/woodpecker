jQuery(document).ready(function(t){var e,o="active",a="disabled",n="duplicate",i="hover",l=[],s=t('input[name="wfw-button_label"]').val(),r=t("#wfw-gform_default_style").is(":checked"),d=t("#wfw-color_submit").val(),u=t("#wfw-color_submit_bg").val(),c=t("#wfw-color_submit_b_-hover").val();function f(){t(".draggable.drop").removeClass(a),t.each(l,function(e,o){t(".fields-box__panel").find('.input-field[data-rel="'+o[4]+'"]').parent().addClass(a)})}function w(e){var a=!1;e.on("mousedown",function(t){a=!0}).on("mousemove",function(){a=!1}).on("click",function(){a&&(k(),C(),t('.forms-container__tabs--tab[data-role="settings"], .fields-settings-box').addClass(o),e.addClass(i),p(),g(e),h(),m())})}function b(){t(".ui-state-default, .draggable.ui-draggable.ui-draggable-handle:not(.drop)").on("mousedown",function(t){isClick=!0}).on("mousemove",function(){isClick=!1}).on("click",function(){isClick&&(k(),C(),t('.forms-container__tabs--tab[data-role="settings"], .fields-settings-box').addClass(o),t(this).addClass(i),p(),g(this),h(),m())})}function m(){t([document.documentElement,document.body]).animate({scrollTop:t(".forms-container__panel").offset().top-56},500)}function p(){t('input[name="wfw-mapping"], input[name="wfw-label"], input[name="wfw-validation"], input[name="wfw-required"], .dropdownWidget__rows--block__value, .delete-field').off()}function g(e){var o=t(e).find(".input-field"),n=t(e).find(".input-title"),i="EMAIL"==o.attr("data-mapping"),l=t('input[name="wfw-required"]');i?(t('input[name="wfw-mapping"]').show(),t(".dropdownWidget").hide(),t(".delete-field").hide(),t(".required").addClass(a)):(t(".dropdownWidget").show(),t(".delete-field").show(),t('input[name="wfw-mapping"]').hide(),t(".required").removeClass(a)),v(e),t(".wfw-mapping").html(o.attr("data-mapping")),t('input[name="wfw-label"]').val(o.attr("data-label")),t('input[name="wfw-validation"]').val(o.attr("data-validation")),l.prop("disabled",i),l.prop("checked","1"==o.attr("data-required")),t(".dropdownWidget__rows--block__value").on("click",function(){let a=t(this).html();t(".wfw-mapping").html(a),o.attr("data-mapping",a),t(".dropdownWidget__rows--block").hide(),_()?showSaveBoxFormSettings(!1,F()):t(".save-box").removeClass("active"),v(e)}),t('input[name="wfw-label"]').on("keyup",function(){let e=t('input[name="wfw-label"]').val();n.html(e),o.attr("data-label",e),showSaveBoxFormSettings(!1,F())}),t('input[name="wfw-validation"]').on("keyup",function(){let e=t('input[name="wfw-validation"]').val();o.attr("data-validation",e),showSaveBoxFormSettings(!1,F())}),t('input[name="wfw-required"]').on("click",function(){let t="1"==o.attr("data-required");o.attr("data-required",t?"0":"1"),showSaveBoxFormSettings(!1,F())}),t(".delete-field").on("click",function(){let n=o.attr("data-rel");t(e).remove(),B(),t('.input-field[data-rel="'+n+'"]').parent().removeClass(a),showSaveBoxFormSettings(!1,F())})}function v(e){t(".dropdownWidget").removeClass(n),t(e).hasClass(n)&&t(".dropdownWidget").addClass(n)}function _(){var e=!0,o=t(".ui-sortable-handle, .draggable.ui-draggable.ui-draggable-handle:not(.drop)");return t(o).removeClass(n),t.each(o,function(a,i){t.each(o,function(o,l){var s=t(i).find(".input-field"),r=t(s).attr("data-mapping"),d=t(l).find(".input-field"),u=t(d).attr("data-mapping");a!=o&&r==u&&(t(i).addClass(n),e=!1)})}),e}function h(){t(".fields-settings-box__empty").removeClass(o),t(".fields-settings-box__panel").addClass(o)}function k(){t(".forms-container__tabs--tab, .fields-box, .fields-settings-box, .style-box").removeClass(o)}function C(){t(".ui-draggable-handle, .ui-state-default").removeClass(i)}function x(){t("#wfw-gform_default_style").is(":checked")?(t("#picker-panel").slideDown(),t(".wp-picker-default").trigger("click")):t("#picker-panel").slideUp()}function S(e){t(e).wpColorPicker({change:function(t,e){setTimeout(function(){y(),showSaveBoxFormSettings(!1,F())},1)},click:function(t){setTimeout(function(){y(),showSaveBoxFormSettings(!1,F())},1)},clear:function(t){setTimeout(function(){y(),showSaveBoxFormSettings(!1,F())},1)}})}function y(){t(".wfw-btn").css("color",t("#wfw-color_submit").val()),t(".wfw-btn").css("background-color",t("#wfw-color_submit_bg").val()),t(".wfw-btn").hover(function(){t(this).css("background-color",t("#wfw-color_submit_b_-hover").val())},function(){t(this).css("background-color",t("#wfw-color_submit_bg").val())})}function F(){return!_()||function(){var e=q();if(e.length!=l.length)return!1;var o=!0;return t.each(l,function(t,a){var n=e[t];a[0]==n[0]&&a[1]==n[1]&&a[2]==n[2]&&a[3]==n[3]||(o=!1)}),o}()&&s==t('input[name="wfw-button_label"]').val()&&r==t("#wfw-gform_default_style").is(":checked")&&d==t("#wfw-color_submit").wpColorPicker().val()&&u==t("#wfw-color_submit_bg").wpColorPicker().val()&&c==t("#wfw-color_submit_b_-hover").wpColorPicker().val()}function B(){t(".fields-settings-box__panel").removeClass(o),t(".fields-settings-box__empty").addClass(o)}function q(){var e=[],o=t(".ui-sortable-handle, .draggable.ui-draggable.ui-draggable-handle:not(.drop)");return t(o).each(function(o,a){var n=t(a).find(".input-field"),i=t(n).attr("data-mapping"),l=t(n).attr("data-label"),s=t(n).attr("data-validation"),r=t(n).attr("data-required"),d=t(n).attr("data-rel");e.push([i,l,s,r,d])}),e}function T(){e=t(".sortableList").html()}x(),S("#wfw-color_submit"),S("#wfw-color_submit_bg"),S("#wfw-color_submit_b_-hover"),y(),t(".save-box__close").on("click",function(){t('input[name="wfw-button_label"]').val(s),t("#wfw-gform_default_style").prop("checked",r),t("#wfw-color_submit-box").find("button").css("background-color",d),t("#wfw-color_submit_bg-box").find("button").css("background-color",u),t("#wfw-color_submit_b_-hover-box").find("button").css("background-color",c),x(),y(),t(".sortableList").html(e),l=q(),f(),k(),B(),t('.forms-container__tabs--tab[data-role="fields"], .fields-box').addClass(o),b(),showSaveBoxFormSettings(!1,!0)}),t('input[name="wfw-button_label"]').on("keyup",function(){t(".wfw-trigger").val(t('input[name="wfw-button_label"]').val()),showSaveBoxFormSettings(!1,F())}),t("#wfw-gform_default_style").on("click",function(){x(),showSaveBoxFormSettings(!1,F())}),b(),t(".sortableList").sortable({revert:!0,receive:function(t,e){jQuery(e.item).addClass(a)},stop:function(t,e){e.item.hasClass("drop")&&(e.item.removeClass("drop"),w(e.item)),showSaveBoxFormSettings(!1,F())}}),t(".draggable.drop").draggable({connectToSortable:".sortableList",cursor:"pointer",revert:"invalid",helper:"clone"}),t(".draggable.drop").on("click",function(){var e=t(this).clone();t(this).addClass(a),e.removeClass("drop"),t(".sortableList").append(e),w(e),showSaveBoxFormSettings(!1,F())}),t(".forms-container__tabs--tab").on("click",function(){switch(k(),t(this).addClass(o),t(this).data("role")){case"settings":setTimeout(function(){t(".fields-settings-box").addClass(o)},300);break;case"style":setTimeout(function(){t(".style-box").addClass(o)},300);break;default:setTimeout(function(){t(".fields-box").addClass(o)},300)}}),l=q(),T(),f(),t(".save-option").on("click",function(e){e.preventDefault();var o=q(),a=t('input[name="wfw-button_label"]').val(),n=t("#wfw-gform_default_style").is(":checked"),i=t("#wfw-color_submit").val(),f=t("#wfw-color_submit_bg").val(),w=t("#wfw-color_submit_b_-hover").val();jQuery.ajax({type:"post",url:ajaxurl,data:{action:"saveFormData",fields:o,buttonLabel:a,defaultStyle:n?"1":"0",fontColor:i,buttonColor:f,buttonHover:w},success:function(){l=o,s=a,r=n,d=i,u=f,c=w,T(),showSaveBoxFormSettings(!0,!0)}})})});