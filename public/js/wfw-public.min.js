!function(e){"use strict";e(document).ready(function(){var a="invalid";function n(a){return e(a).closest("form")}function s(){var a=e("input[name=wfw-accept_policy]");a.prop("checked",!1),a.val(0)}s(),e("input[name=wfw-accept_policy]").on("click",function(){var s=n(this),i=e(s).find("div.wfw-checkbox");i.hasClass(a)&&i.removeClass(a),e(this).val(e(this).is(":checked")?1:0)}),e("div.wfw-required").on("keyup",function(){var s=n(this);e(s).find("div.wfw-required").hasClass(a)&&(e(this).removeClass(a),e(s).find(".wfw-response-container").slideUp())}),e(".wfw-trigger").on("click",function(i){i.preventDefault();var t=[],r=n(this);if(function(n){var s=!0,i=new RegExp(/^\b[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}\b$/i),t=e(n).find('input[name="wfw-email"]'),r=e(n).find(".wfw-required").find("input"),d=e("input[name=wfw-accept_policy]"),o=d.is(":checked");i.test(t.val())||(t.parent().addClass(a),s=!1);e.each(r,function(n,i){""==e(i).val().trim()&&(e(i).parent().addClass(a),s=!1)}),s||e([document.documentElement,document.body]).animate({scrollTop:e(n).find("."+a).offset().top-56},500);o||(d.parent().addClass(a),s=!1);return d.val(o?1:0),s}(r)){e(r).find(".wfw-response-container").slideUp().html(""),e(r).find("input").each(function(){var a=e(this).attr("name"),n=e(this).val(),s={};s.name=a,s.val=n,t.push(s),e(this).removeClass("wfw-input-danger")});var d=t,o={action:"add_prospect_to_campaing",parameters:d},c=e(this).data("ajaxurl"),l=e(r).find(".wfw-response-container");e.post(c,o,function(n){if(0==n)l.html("Sorry no response");else{var i=e.parseJSON(n);if("ERROR"==i.action)"POLICY"==i.code?(e(r).find("div.wfw-checkbox").addClass(a),l.html('<div class="alert alert-danger wfw-danger">'+i.message+"</div>").slideDown()):(e(r).find("div.wfw-required").addClass(a),l.html('<div class="alert alert-danger wfw-danger">'+i.message+"</div>").slideDown());else if("DUPLICATE"==i.action)l.html('<div class="alert alert-success wfw-success">'+i.message+"</div>").slideDown(),console.log(d),jQuery.ajax({type:"post",url:c,data:{action:"addProspectsToDatabase",fields:d}}),s();else{l.html('<div class="alert alert-success wfw-success">'+i.message+"</div>").slideDown(),jQuery.ajax({type:"post",url:c,data:{action:"addProspectsToDatabase",fields:d}});var t=e(r).find("div.wfw-group").find(".form-control");e.each(t,function(a,n){e(n).val("")}),s()}}}).done(function(){}).fail(function(){e(r).find(".wfw-response-container").html("Error")}).always(function(){})}})})}(jQuery);